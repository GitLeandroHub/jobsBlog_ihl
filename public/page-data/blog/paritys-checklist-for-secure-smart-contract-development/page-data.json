{"componentChunkName":"component---src-components-templates-blog-template-tsx","path":"/blog/paritys-checklist-for-secure-smart-contract-development/","result":{"data":{"mdx":{"frontmatter":{"author":"Kirill Pimenov","date_published":"April 02, 2019","image":"/images/checklist-for-secure-smart-contract-development-6.png","slug":"blog/paritys-checklist-for-secure-smart-contract-development/","tags":[],"blogTitle":"Parity’s Checklist for Secure Smart Contract Development"},"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"index\",\n  \"tags\": [],\n  \"author\": \"Kirill Pimenov\",\n  \"blogTitle\": \"Parity’s Checklist for Secure Smart Contract Development\",\n  \"slug\": \"blog/paritys-checklist-for-secure-smart-contract-development/\",\n  \"date_published\": \"2019-04-02T04:00:00.000Z\",\n  \"image\": \"/images/checklist-for-secure-smart-contract-development-6.png\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"As introduced in a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://invisiblehandlab.kinera.network/new-smart-contract-development-processes/\"\n  }, \"previous post\"), \", we have developed a fourteen-point checklist for secure smart contract development. We are happy to provide this checklist as a resource to help the greater smart contract development community develop securely. We\\u2019ve incorporated the feedback from our auditing partner, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://invisiblehandlab.kinera.network/parity-completes-trail-of-bits-security-review/\"\n  }, \"Trail of Bits\"), \", in this process, and we welcome feedback on anything that can be further improved. Our policy is to implement these procedures 100% for all new smart contracts we develop. On existing contracts, we have opted out of changes touching the API in order to avoid any redeployment issues.  \"), mdx(\"p\", null, \"The secure smart contract development checklist:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Create a new GitHub organization\"), \" to exclusively house production-related contracts. For example, our repo is \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/parity-contracts\"\n  }, \"parity-contracts\"), \". All contracts in this dedicated repo should be actively maintained or in use, or be under active development for production. There should be no obsolete or legacy projects in this repo.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Put every contract in a separate repo\"), \" in your new dedicated organization. (\\u201CEvery contract\\u201D can also mean a \\u201Clogical unit\\u201D of a few tightly coupled contracts\\u2014for example Operations.sol and OperationsProxy.sol, which clearly go together and cannot be reasonably expected to be used separately.)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Embed dependencies\"), \" to make the code coverage metric more meaningful and make it easier to programmatically reason about the contract\\u2019s entire codebase. All duplicated sources should be explicitly listed as such (with cross-links!) in every repo\\u2019s README they\\u2019re copied into.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Ensure each contract in the repo meets the following code quality criteria:\"), \"  \", mdx(\"br\", null), mdx(\"br\", null), \"a. \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"The actual deployed state of each contract should live in a protected \", mdx(\"code\", null, \"master\"), \" branch.\"), \" The latest master should always reflect the code deployed to all relevant chains. No one should be able to commit directly to the master. Address fixes for all dependent code should be submitted right after this deployment, in the same Pull Request. The \", mdx(\"code\", null, \"master\"), \" branch should be made the default for the repo, so navigating there on GitHub shows you the latest deployed contract (and its addresses) right away.  \", mdx(\"br\", null), mdx(\"br\", null), \"It can be helpful to also have a \", mdx(\"code\", null, \"development\"), \" branch to accumulate not-yet-deployed changes to the contract, under the conditions that:\", mdx(\"br\", null), mdx(\"br\", null), \"- \", mdx(\"code\", null, \"development\"), \" is also a protected branch, with all the checks from this section (tests, reviews, linting, and so on) required\", mdx(\"br\", null), mdx(\"br\", null), \"- there\\u2019s an established process, with a responsible person and an agreed-upon timeframe, for this contract to be merged into \", mdx(\"code\", null, \"master\"), \" and deployed.\", mdx(\"br\", null), mdx(\"br\", null), \"b. Tests should be written in a language other than Solidity (most likely JavaScript + Truffle) to make sure that bugs related to syntax quirks and misunderstandings are discoverable with tests, not just replicated there.\", mdx(\"br\", null), mdx(\"br\", null), \"c. Tests are covered by CI. If your contracts are publicly available, running tests in [Travis](https://travis-ci.org/) or [CircleCI](https://circleci.com/) shouldn\\u2019t be a problem (and is recommended, since you\\u2019ll need less maintenance for CI machines this way). Having all tests passing is mandatory for a PR to be merged, and it should be enforced for everyone in the GitHub settings.\", mdx(\"br\", null), mdx(\"br\", null), \"d. Coverage should be set up for the tests from the point above. It should be mandatory that a PR is only able to be merged if the code coverage won\\u2019t drop.\", mdx(\"br\", null), mdx(\"br\", null), \"e. Linting should be enabled for all the contract source files in the contract repo, dependencies included. The linter should be included in the test run on CI, and failing to lint should make merging impossible. Linter line-specific exceptions are allowed, provided that the reason to do so (and some safety explanation) is described in the same comment.\", mdx(\"br\", null), mdx(\"br\", null), \"f. Each repo should have at least two code owners defined, as described [here](https://help.github.com/articles/about-codeowners/). It is best practice to define repo-wide (aka \\u2018wildcard\\u2019) code owners to cover any contracts where Code Owners are not defined.\", mdx(\"br\", null), mdx(\"br\", null), \"g. Reviews should be required for Pull Requests. Two reviewers should approve the PR at its latest revision in order for the PR to be merged, and at least one reviewer should be a Code Owner (enforced by GitHub). You can use [reviewable.io](http://reviewable.io/) to simplify this tracking of \\u201Cwho reviewed what.\\u201D It is OK for the submitter of the PR to deploy the \\u201Cgreenlit\\u201D version of the PR to the blockchain to obtain its address and modify the mapping in the README in the same PR. It is the **submitter**\\u2019s responsibility to make sure their PR is getting proper reviews; calling for attention in developers\\u2019 chatrooms is a good way of getting reviews to happen.\", mdx(\"br\", null), mdx(\"br\", null), \"h. Rebasing to the latest \", mdx(\"code\", null, \"master\"), \" should be mandatory so that no PR can be merged without tests passing after a clean ff-merge with \", mdx(\"code\", null, \"master\"), \".\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Ensure every contract repo has its up-to-date bytecode and API in \", mdx(\"code\", null, \"master\"), \" branch.\"), \" It is the duty of the PR \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"submitter\"), \" to ensure that API and bytecode are updated appropriately.\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Every contract should have a README that lists its deployment addresses in all networks.\"), \" Where applicable, that address should link to a blockchain-exploring service (e.g., Etherscan), which should contain a \\u201Cverified code\\u201D tab for this address and contract source.\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Ensure the README contains a separate \\u201CUpdate Strategy\\u201D section.\"), \" In that section, enumerate what needs to be done to properly do a (possibly security-critical) update to the contract. Example questions to cover in the Update Strategy section:  \", mdx(\"br\", null), mdx(\"br\", null), \"- Is there a proxy contract?  \", mdx(\"br\", null), mdx(\"br\", null), \"- Which other systems need to be updated?  \", mdx(\"br\", null), mdx(\"br\", null), \"- How to move data from contract to contract?\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"At the top of the README, put a clear indication of the \\u201Cproduction readiness\\u201D state of the contract\"), \" (like a badge):  \", mdx(\"br\", null), \"- alpha \\u2014 contracts which are under active development and may not yet be in proper shape.  \", mdx(\"br\", null), mdx(\"br\", null), \"- beta \\u2014 contracts which are feature-ready and possibly ready for testnet use, but are not yet audited. These SHOULD NOT be used on the mainnet.  \", mdx(\"br\", null), mdx(\"br\", null), \"- stable \\u2014 contracts that are properly audited, deployed to mainnet, and are in active use.  \", mdx(\"br\", null), mdx(\"br\", null), \"- deprecated \\u2014 contracts no longer supported and used, but you want to keep around for some reason. (Avoid keeping these around! Deleting a repository is almost always a better idea, if only to discourage other parties from repeating your possible mistakes.)\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Incorporate all the applicable points into a\"), \" \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://help.github.com/articles/creating-a-pull-request-template-for-your-repository/\"\n  }, mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"PULL_REQUEST_TEMPLATE.md\")), \" \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"file in the repo.\"), \" Format this file as a checklist. It is the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"submitter\"), \"\\u2019s duty to ensure all checkboxes are checked prior to merging.\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Ensure every contract\\u2019s main file has its URL in the comment header section.\"), \" This is to make it possible for anyone to trace the code back to the repo, even when copying or re-hosting the code.\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Ensure contracts have view or pure functions\"), \" (or just public constant definitions, which would create corresponding getters automatically) with contract_name and contract_version defined. Those functions should have the following properties:  \", mdx(\"br\", null), mdx(\"br\", null), \"\\na. \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"contract_name\"), \" should correspond to the organization/repository part of the repository. Because we\\u2019re following a \\u201Cone contract per repo\\u201D policy, this identifier should be unique enough.  \", mdx(\"br\", null), mdx(\"br\", null), \"\\nb. \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"contract_version\"), \" should contain monotonically increasing integer versions. It\\u2019s mandatory to bump this version in every PR to master.\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Ensure deployed versions on master have matching versioned git tags\"), \" (gpg-signed if possible). These tags should be created/uploaded \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"only after\"), \" the actual deployment happened in order to not wipe out tags during possible redeployment cycles (especially possible in complicated migration cases).\", mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Ensure each contract repo has a clearly defined license.\"), mdx(\"br\", null), mdx(\"br\", null)), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Only allow addresses from the READMEs of \", mdx(\"code\", null, \"master\"), \" versions to be referenced from production code/configs\"), \", so you know that those contracts are tested, maintained, and have their deployments documented properly. Referencing an address should on every occasion be accompanied with a permalink (with a commit hash included) to the corresponding contract repo. Reviewers of such PRs should verify that: \", mdx(\"br\", null), mdx(\"br\", null), \"\\na. The deployed address from the README is correct.  \", mdx(\"br\", null), mdx(\"br\", null), \"\\nb. It is the latest merged and deployed version.  \", mdx(\"br\", null), mdx(\"br\", null), \"\\nc. The contract usage from other code corresponds to its declared goal.  \", mdx(\"br\", null), mdx(\"br\", null), \"\\nd. The APIs are correct.\", mdx(\"br\", null), mdx(\"br\", null))), mdx(\"hr\", null), mdx(\"p\", null, \"We hope this checklist helps the smart contract community develop securely. Feel free to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://riot.im/app/#/room/#watercooler:matrix.parity.io\"\n  }, \"post in the Parity watercooler chat\"), \" if you have any questions about the checklist.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Further resources:\"), mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://invisiblehandlab.kinera.network/new-smart-contract-development-processes/\"\n  }, \"Secure from scratch: our new smart contract development processes\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://consensys.github.io/smart-contract-best-practices/\"\n  }, \"ConsenSys Ethereum Smart Contracts Best Practices\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://guidelines.secureth.org/\"\n  }, \"SecurEth Guidelines\")));\n}\n;\nMDXContent.isMDXComponent = true;","timeToRead":3,"excerpt":"As introduced in a  previous post , we have developed a fourteen-point checklist for secure smart contract development. We are happy to…"},"allMdx":{"edges":[{"node":{"frontmatter":{"blogTitle":"We just released ink! 4.0!","date_published":"February 08, 2023","image":"/images/qsdh5p9.jpeg","slug":"we-just-released-ink-4-0"}}},{"node":{"frontmatter":{"blogTitle":"Parity Leadership Update","date_published":"October 21, 2022","image":"/images/blog-post.png","slug":"blog/parity-leadership-update/"}}},{"node":{"frontmatter":{"blogTitle":"Transitioning Parity Ethereum to OpenEthereum DAO","date_published":"December 16, 2019","image":"/images/parity-ethereum-openethereum.jpeg","slug":"blog/parity-ethereum-openethereum-dao/"}}}]}},"pageContext":{"slug":"blog/paritys-checklist-for-secure-smart-contract-development/","locale":"en","hrefLang":"en-US","originalPath":"/blog/paritys-checklist-for-secure-smart-contract-development/","dateFormat":"MM/DD/YYYY"}},"staticQueryHashes":["1239077767","1247656359","3280999885","3280999885","4123762078","4185913137","607815487","607815487"]}